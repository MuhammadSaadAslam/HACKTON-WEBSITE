"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7036],{13528:function(e,t,i){i.d(t,{AC:function(){return m},ie:function(){return f},FL:function(){return s},LV:function(){return c},pA:function(){return l},$j:function(){return d},tL:function(){return u}});var r=i(85893),a=i(84297);let n=(0,a.Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),o=(0,a.Z)("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),s=e=>(0,r.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.132.979a.75.75 0 01.446.78l-.728 5.824h6.65a.75.75 0 01.576 1.23l-8.333 10a.75.75 0 01-1.32-.573l.727-5.823H2.5a.75.75 0 01-.576-1.23l8.333-10a.75.75 0 01.875-.208zm-7.03 9.938H10a.75.75 0 01.744.843l-.516 4.128 5.67-6.805H10a.75.75 0 01-.744-.843l.516-4.128-5.67 6.805z",fill:"currentColor"})}),l=e=>(0,r.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.47 3.47A.75.75 0 014 3.25h6.75a.75.75 0 01.75.75v.75a.75.75 0 001.5 0V4a2.25 2.25 0 00-2.25-2.25H4A2.25 2.25 0 001.75 4v6.75A2.25 2.25 0 004 13h.75a.75.75 0 000-1.5H4a.75.75 0 01-.75-.75V4a.75.75 0 01.22-.53zM8.5 9.25a.75.75 0 01.75-.75H16a.75.75 0 01.75.75V16a.75.75 0 01-.75.75H9.25A.75.75 0 018.5 16V9.25zM9.25 7A2.25 2.25 0 007 9.25V16a2.25 2.25 0 002.25 2.25H16A2.25 2.25 0 0018.25 16V9.25A2.25 2.25 0 0016 7H9.25z",fill:"currentColor"})}),c=e=>(0,r.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M15 7l-6.875 6.875L5 10.75",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}),d=n,u=o,m=e=>(0,r.jsxs)("svg",{fill:"#fff",height:"800px",width:"800px",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22.773 22.773",...e,children:[(0,r.jsx)("path",{d:"M15.769,0c0.053,0,0.106,0,0.162,0c0.13,1.606-0.483,2.806-1.228,3.675c-0.731,0.863-1.732,1.7-3.351,1.573 c-0.108-1.583,0.506-2.694,1.25-3.561C13.292,0.879,14.557,0.16,15.769,0z"}),(0,r.jsx)("path",{d:"M20.67,16.716c0,0.016,0,0.03,0,0.045c-0.455,1.378-1.104,2.559-1.896,3.655c-0.723,0.995-1.609,2.334-3.191,2.334 c-1.367,0-2.275-0.879-3.676-0.903c-1.482-0.024-2.297,0.735-3.652,0.926c-0.155,0-0.31,0-0.462,0 c-0.995-0.144-1.798-0.932-2.383-1.642c-1.725-2.098-3.058-4.808-3.306-8.276c0-0.34,0-0.679,0-1.019 c0.105-2.482,1.311-4.5,2.914-5.478c0.846-0.52,2.009-0.963,3.304-0.765c0.555,0.086,1.122,0.276,1.619,0.464 c0.471,0.181,1.06,0.502,1.618,0.485c0.378-0.011,0.754-0.208,1.135-0.347c1.116-0.403,2.21-0.865,3.652-0.648 c1.733,0.262,2.963,1.032,3.723,2.22c-1.466,0.933-2.625,2.339-2.427,4.74C17.818,14.688,19.086,15.964,20.67,16.716z"})]}),f=e=>(0,r.jsx)("svg",{role:"img",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"currentColor",d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"})})},41299:function(e,t,i){i.d(t,{P:function(){return s}});var r=i(85893),a=i(41664),n=i.n(a),o=i(25615);function s(){let e=(0,o.ZP)();return(null==e?void 0:e.uid)?null:(0,r.jsx)("div",{children:(0,r.jsxs)("p",{className:"px-10 mt-8 text-center text-muted-foreground text-xs leading-4",children:["By continuing, you agree to our"," ",(0,r.jsx)(n(),{href:"/terms",className:"underline hover:text-primary",children:"terms of use"})," ",(0,r.jsx)("br",{}),"and have read our"," ",(0,r.jsx)(n(),{href:"/privacy",className:"underline hover:text-primary",children:"privacy policy"}),"."]})})}},7036:function(e,t,i){i.d(t,{L:function(){return I},Z:function(){return _}});var r=i(85893),a=i(11163),n=i(41664),o=i.n(n),s=i(67294),l=i(13169),c=i(27510),d=i(1604),u=i(87536),m=i(56312),f=i(10878),h=i(97333),g=i(29982),x=i(84493),p=i(13528);let b=d.Ry({email:d.Z_().email({message:"Please enter a valid email address."})}),j={},v={authProviders:["google"]};function w(e){let{onResponse:t,redirectTo:i}=e,a=(0,u.cI)({resolver:(0,m.F)(b),defaultValues:j});async function n(e){try{let r=await (0,l.U)(),a=await fetch("/api/verification/request",{body:JSON.stringify({email:e.email,recaptchaToken:r,purpose:"magic-code",redirectTo:i}),headers:{"Content-Type":"application/json"},method:"POST"}),n=await a.json();if(!(null==n?void 0:n.success))throw Error((null==n?void 0:n.error)||"Something went wrong");t({...n,email:e.email})}catch(e){a.setError("email",{type:"manual",message:String(e)})}}(0,s.useEffect)(()=>{a.setFocus("email")},[a]);let c=a.formState.isSubmitting||!a.formState.isValid,d=i?"?redirectTo=".concat(i):"";return(0,r.jsx)(f.l0,{...a,children:(0,r.jsxs)("form",{onSubmit:a.handleSubmit(n),className:"grid gap-4",children:[(0,r.jsx)("label",{htmlFor:"email",className:"text-left text-xl font-semibold tracking-tight",children:"Log in or create an account"}),(0,r.jsx)(f.Wi,{control:a.control,name:"email",render:()=>(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(g.I,{autoFocus:!0,placeholder:"you@example.com",type:"email",id:"email",autoCapitalize:"none",autoComplete:"email",autoCorrect:"off",className:"block w-full col-span-3 border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:border-gray-600 dark:bg-gray-700",disabled:a.formState.isSubmitting,...a.register("email")})}),(0,r.jsx)(f.zG,{})]})}),(0,r.jsxs)("p",{className:"text-muted-foreground text-xs",children:["By continuing, you agree to our"," ",(0,r.jsx)(o(),{href:"/terms",className:"underline hover:text-primary",children:"terms of use"})," ","and have read our"," ",(0,r.jsx)(o(),{href:"/privacy",className:"underline hover:text-primary",children:"privacy policy"}),"."]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)(h.z,{disabled:c,type:"submit",className:(0,x.cn)("w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 sm:col-start-2 sm:text-sm",{"cursor-wait":a.formState.isSubmitting,"opacity-50":c}),children:[a.formState.isSubmitting&&(0,r.jsx)(p.$j,{className:"w-4 h-4 mr-2 animate-spin"}),"Continue"]})}),(null==v?void 0:v.authProviders.length)>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"px-2 bg-background text-muted-foreground",children:"Or continue with"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-".concat(v.authProviders.length>1?"2":"1"," gap-2"),children:[v.authProviders.includes("google")&&(0,r.jsxs)(h.z,{variant:"outline",type:"button",disabled:a.formState.isSubmitting,onClick:()=>{window.location.href="/auth/google".concat(d)},children:[(0,r.jsx)(p.ie,{className:"w-4 h-4 mr-2"})," ","Google"]}),v.authProviders.includes("apple")&&(0,r.jsxs)(h.z,{variant:"outline",type:"button",disabled:a.formState.isSubmitting,onClick:()=>{window.location.href="/auth/apple".concat(d)},children:[(0,r.jsx)(p.AC,{className:"w-4 h-4 mr-2"})," ","Apple"]})]})]})]})})}var N=i(25615),y=i(81562),C=i(41299),S=i(37473);let k=d.Ry({email:d.Z_().email(),tokenId:d.Z_().optional(),magicCode:d.Z_().min(S.eq),redirectTo:d.Z_().optional()});function T(e){let{email:t,tokenId:i,canLoginViaGoogle:a,canLoginViaTwitter:n,redirectTo:o}=e,d=(0,u.cI)({resolver:(0,m.F)(k),defaultValues:{email:t,redirectTo:o,tokenId:i}}),[b,j]=(0,s.useState)(!1),v=d.watch("magicCode"),w=(0,s.useCallback)(async e=>{try{let t=await (0,l.U)(),i=await fetch("/api/auth/via-magic-code",{body:JSON.stringify({email:e.email,recaptchaToken:t,code:e.magicCode,tokenId:e.tokenId,redirectTo:o||void 0}),headers:{"Content-Type":"application/json"},method:"POST"}),r=await i.json();r.redirectTo&&(j(!0),(0,c.fx)(r.redirectTo)),r.error&&d.setError("magicCode",{type:"manual",message:r.errorMessage||r.error})}catch(e){console.error("error",e),d.setError("magicCode",{type:"manual",message:String(e)})}},[d,o]);(0,s.useEffect)(()=>{v&&(null==d||d.setValue("magicCode",v.toUpperCase().trim()))},[v,d]),(0,s.useEffect)(()=>{let e=e=>{if(!(e instanceof ClipboardEvent))return;let t=e.clipboardData.getData("text");d.setFocus("magicCode"),d.setValue("magicCode",t.toUpperCase().trim()),d.handleSubmit(w)()};return window.addEventListener("paste",e),()=>{window.removeEventListener("paste",e)}},[d,w]),(0,s.useEffect)(()=>{d.setValue("email",t||""),d.setValue("redirectTo",o||""),d.setValue("tokenId",i||"")},[t,o,i,d]);let N=o?"?redirectTo=".concat(o):"",y=!d.formState.isValid||d.formState.isSubmitting||b;return(0,r.jsx)(f.l0,{...d,children:(0,r.jsxs)("form",{onSubmit:d.handleSubmit(w),className:"grid gap-4",children:[(0,r.jsx)("label",{htmlFor:"magicCode",className:"text-left text-xl font-semibold tracking-tight",children:"Enter your confirmation code"}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["We just sent it to ",(0,r.jsx)("b",{children:t})]}),(0,r.jsx)(f.Wi,{control:d.control,name:"magicCode",render:()=>(0,r.jsxs)(f.xJ,{children:[(0,r.jsx)(f.NI,{children:(0,r.jsx)(g.I,{autoFocus:!0,placeholder:"XXX-XXX",id:"magicCode",autoCapitalize:"none",autoCorrect:"off",className:(0,x.cn)("shadow-sm focus:ring-blue-500 focus:border-blue-500 block w-full border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700 text-4xl h-20 text-center tracking-[.25em]",{"border-red-500 dark:border-red-600":d.formState.errors.magicCode}),disabled:d.formState.isSubmitting,...d.register("magicCode")})}),(0,r.jsx)(f.zG,{className:"pt-3"})]})}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Check your spam folder if you don't see it. Code expires in 10 minutes."}),(0,r.jsx)("div",{children:(0,r.jsxs)(h.z,{disabled:y,type:"submit",className:(0,x.cn)("w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 sm:col-start-2 sm:text-sm",{"opacity-50":y,"cursor-wait":d.formState.isSubmitting||b}),children:[d.formState.isSubmitting&&(0,r.jsx)(p.$j,{className:"w-4 h-4 mr-2 animate-spin"}),"Verify code"]})}),(a||n)&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"px-2 bg-background text-muted-foreground",children:"Or continue with"})})]}),a&&(0,r.jsxs)(h.z,{variant:"outline",type:"button",disabled:d.formState.isSubmitting,onClick:()=>{window.location.href="/auth/google".concat(N)},children:[d.formState.isSubmitting?(0,r.jsx)(p.$j,{className:"w-4 h-4 mr-2 animate-spin"}):(0,r.jsx)(p.ie,{className:"w-4 h-4 mr-2"})," ","Google"]}),n&&(0,r.jsxs)(h.z,{variant:"outline",type:"button",disabled:d.formState.isSubmitting,onClick:()=>{window.location.href="/auth/twitter".concat(N)},children:[d.formState.isSubmitting?(0,r.jsx)(p.$j,{className:"w-4 h-4 mr-2 animate-spin"}):(0,r.jsx)(p.tL,{className:"w-4 h-4 mr-2"})," ","Twitter"]})]})})}function I(e){let{enabledModal:t,setEnabledModal:i,redirectTo:a}=e,n=(0,N.ZP)(),[o,d]=(0,s.useState)(""),[u,m]=(0,s.useState)("");(0,l.Z)();let[f,h]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1),[p,b]=(0,s.useState)(!1);return(null==n?void 0:n.uid)?null:o&&"LOGIN_OPTIONS"===t?(0,r.jsx)(T,{email:o,tokenId:u,canLoginViaMagicCode:f,canLoginViaGoogle:g,canLoginViaTwitter:p,redirectTo:a}):(0,r.jsx)(w,{onResponse:function(e){if(e.redirectTo){(0,c.fx)(e.redirectTo);return}e.email&&e.tokenId&&(d(e.email),m(e.tokenId),e.canLoginViaMagicCode&&h(e.canLoginViaMagicCode),e.canLoginViaGoogle&&x(e.canLoginViaGoogle),e.canLoginViaTwitter&&b(e.canLoginViaTwitter),i("LOGIN_OPTIONS"))},redirectTo:a})}function L(){let e=(0,N.ZP)(),t=(0,y.Z)(e?y.z.LANDING_LOGIN_TO_APP_CTA:y.z.LANDING_SIGNUP_CTA),i=(0,a.useRouter)().query.redirectTo,n=i?"?redirectTo=".concat(encodeURIComponent(i)):"";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{href:e?"/app-login":"/auth/google".concat(n),className:"px-8 py-4 text-white brand-button",ref:t,children:[e?"Continue to Texts.app":"Continue with Google"," →"]}),(!e||e&&!e.recentlyActive)&&(0,r.jsx)(h.z,{variant:"link",asChild:!0,children:(0,r.jsxs)(o(),{href:e?"/install":"/login".concat(n),children:["or ",e?"download here":"use email instead"," →"]})}),(0,r.jsx)(C.P,{})]})}function _(e){let{className:t}=e;return(0,r.jsx)("div",{className:(0,x.cn)("flex flex-col flex-wrap items-center",t),children:(0,r.jsx)(L,{})})}},81562:function(e,t,i){i.d(t,{Z:function(){return l},z:function(){return a}});var r,a,n=i(11163),o=i(67294),s=i(77381);function l(e,t){let i=(0,o.useRef)(),r=(0,s.nA)(),{asPath:a}=(0,n.useRouter)(),l=(0,o.useCallback)(()=>{var n,o;return null==r?void 0:null===(o=r.analytics)||void 0===o?void 0:null===(n=o.trackLink)||void 0===n?void 0:n.call(o,i.current,e,{...t,path:a})},[r,a,e,t]);return(0,o.useEffect)(()=>{(null==i?void 0:i.current)&&(null==l||l())},[i,l]),i}(r=a||(a={})).LANDING_LOGIN_TO_APP_CTA="website.click.landing-login-to-app-cta",r.LANDING_SIGNUP_CTA="website.click.landing-signup-cta",r.SUBSCRIPTION_REQUIRED_BANNER_CTA="website.click.subscription-required-banner-cta",r.VIEWED_SUBSCRIPTION_PLANS="website.view.subscription-plans"}}]);